<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Neural Deck</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- ───────── Top Bar ───────── -->
  <header id="topbar">
    <div class="topbar-brand">
      <svg class="brand-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10" />
        <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20" />
        <path d="M2 12h20" />
      </svg>
      <span class="brand-title">Neural Deck</span>
    </div>

    <div class="topbar-controls">
      <div class="input-group server-group">
        <label for="server-url">Server</label>
        <input type="text" id="server-url" value="http://localhost:11434" spellcheck="false" />
      </div>

      <div class="input-group model-group">
        <label for="model-select">Model</label>
        <select id="model-select">
          <option value="">— select model —</option>
        </select>
      </div>

      <button id="btn-refresh" title="Refresh models">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
          stroke-linejoin="round">
          <polyline points="23 4 23 10 17 10" />
          <polyline points="1 20 1 14 7 14" />
          <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15" />
        </svg>
      </button>

      <button id="btn-toggle-settings" title="Settings">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
          stroke-linejoin="round">
          <circle cx="12" cy="12" r="3" />
          <path
            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.32 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z" />
        </svg>
      </button>
    </div>
  </header>

  <!-- ───────── Main Layout ───────── -->
  <div id="app">
    <!-- Settings Sidebar -->
    <aside id="sidebar" class="open">
      <div class="param-group">
        <label for="agent-name">Agent Name</label>
        <input type="text" id="agent-name" value="Assistant" spellcheck="false" />
        <p class="param-hint">Display name for the AI in chat</p>
      </div>

      <h2>Parameters</h2>

      <div class="param-group">
        <label for="temperature">Temperature <span id="temp-value" class="param-value">0.7</span></label>
        <input type="range" id="temperature" min="0" max="2" step="0.05" value="0.7" />
        <div class="range-labels"><span>Precise</span><span>Creative</span></div>
      </div>

      <div class="param-group">
        <label for="max-tokens">Max Tokens</label>
        <input type="number" id="max-tokens" min="1" max="128000" value="2048" />
        <p class="param-hint">Maximum number of tokens to generate</p>
      </div>

      <div class="param-group">
        <label for="context-length">Context Length</label>
        <input type="number" id="context-length" min="256" max="131072" value="4096" />
        <p class="param-hint">Size of the context window (num_ctx)</p>
      </div>

      <div class="param-group toggle-group">
        <label for="stream-toggle">Stream Response</label>
        <label class="toggle-switch">
          <input type="checkbox" id="stream-toggle" checked />
          <span class="toggle-slider"></span>
        </label>
        <p class="param-hint">Stream tokens in real-time vs. wait for full response</p>
      </div>

      <div class="param-group">
        <label for="chunk-size">Chunk Size</label>
        <input type="number" id="chunk-size" min="1" max="4096" value="512" />
        <p class="param-hint">Batch size for prompt processing (num_batch)</p>
      </div>

      <div class="param-group">
        <label for="system-prompt">System Prompt</label>
        <textarea id="system-prompt" rows="6" placeholder="You are a helpful assistant..."></textarea>
      </div>

      <button id="btn-clear" class="btn-secondary">Clear Chat</button>
    </aside>

    <!-- Chat Area -->
    <main id="chat-area">
      <div id="messages">
        <div class="welcome-message">
          <div class="welcome-icon">
            <img src="ndlogo.jpg" alt="Neural Deck" />
          </div>
          <h2>Welcome to Neural Deck</h2>
          <p>Connect to your Ollama server, pick a model, and start chatting.</p>
        </div>
      </div>

      <!-- Input Bar -->
      <div id="attachments-preview" class="hidden"></div>
      <div id="input-bar">
        <button id="btn-attach-image" title="Attach image for vision models">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
            <circle cx="8.5" cy="8.5" r="1.5" />
            <polyline points="21 15 16 10 5 21" />
          </svg>
        </button>
        <button id="btn-attach-file" title="Attach file">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round">
            <path
              d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48" />
          </svg>
        </button>
        <textarea id="user-input" rows="1" placeholder="Type your message…" autofocus></textarea>
        <button id="btn-send" title="Send">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round">
            <line x1="22" y1="2" x2="11" y2="13" />
            <polygon points="22 2 15 22 11 13 2 9 22 2" />
          </svg>
        </button>
        <button id="btn-stop" title="Stop generation" class="hidden">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <rect x="4" y="4" width="16" height="16" rx="2" />
          </svg>
        </button>
      </div>
    </main>
  </div>

  <div id="status-bar">
    <span id="status-text">Disconnected</span>
  </div>

  <script src="renderer.js"></script>
</body>

</html>